(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{33:function(e,t,a){e.exports=a(64)},38:function(e,t,a){},39:function(e,t,a){},64:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),s=a(11),c=a.n(s),i=(a(38),a(3)),o=a(4),l=a(7),p=a(5),u=a(6),h=(a(39),a(14)),d=a(12),m={GET_ALL_STORIES:"GET_ALL_STORIES",UPDATE_SEARCH:"UPDATE_SEARCH",CLEAR_SEARCH:"CLEAR_SEARCH"},E=function(e,t){return{type:m.UPDATE_SEARCH,payload:{searchType:e,search:t}}},y=function(e){return{type:m.GET_ALL_STORIES,payload:e}},g=function(){return{type:m.CLEAR_SEARCH,payload:""}},f=m,v=a(9),b=a.n(v),D={stories:{},search:{query:""}},S=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:D,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case f.GET_ALL_STORIES:var a=b.a.cloneDeep(e);return a.stories=t.payload,a;case f.UPDATE_SEARCH:var r=b.a.cloneDeep(e);return r.search[t.payload.searchType]=t.payload.search,r;case f.CLEAR_SEARCH:var n=b.a.cloneDeep(e);return n.search=D.search,n;default:return e}};var O,A=a(20),_=a.n(A),j=a(29),N=a(2),P=function(e){var t=e.sortDate,a=e.days,r=e.selectedDate;return n.a.createElement("span",{className:"sort-option ".concat(r===a?"selected":""),onClick:function(){return t(a)}},1==a?n.a.createElement("span",null,"24 Hours"):n.a.createElement("span",null,"Last ",a," Days"))},k=function(e){function t(e){return Object(i.a)(this,t),Object(l.a)(this,Object(p.a)(t).call(this,e))}return Object(u.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return n.a.createElement("section",{id:"search"},n.a.createElement("div",{className:"search-wrap"},n.a.createElement("h1",null,"HACKER NEWS SEARCH"),n.a.createElement("div",{className:"search-bar"},n.a.createElement("input",{id:"search-input",type:"text",onKeyUp:this.props.onKeyUp}),n.a.createElement("span",{className:"cancel",onClick:this.props.cancelSearch},n.a.createElement("img",{src:"https://img.icons8.com/metro/26/000000/multiply.png"})),n.a.createElement("div",{className:"search-bar-settings"},n.a.createElement("span",{className:"sort-title"},"Date:"),n.a.createElement("span",{className:"sort-option ".concat(this.props.selectedDate?"":"selected"),onClick:this.props.cancelSortDate},"All"),n.a.createElement(P,{selectedDate:this.props.selectedDate,sortDate:this.props.sortDate,days:1}),n.a.createElement(P,{selectedDate:this.props.selectedDate,sortDate:this.props.sortDate,days:7}),n.a.createElement(P,{selectedDate:this.props.selectedDate,sortDate:this.props.sortDate,days:30}),n.a.createElement(P,{selectedDate:this.props.selectedDate,sortDate:this.props.sortDate,days:90}),n.a.createElement("span",{className:"sort-option",onClick:this.props.cancelSortDate})))))}}]),t}(r.Component),w=a(30),T=a.n(w),C=a(31),R=a.n(C),I=function(e){function t(){return Object(i.a)(this,t),Object(l.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return n.a.createElement("section",{id:"results"},n.a.createElement("ul",{className:"results-list ".concat(this.props.typing?"typing":"")},this.props.stories.length?this.props.stories.map(function(e,t){return n.a.createElement("a",{rel:"noopener noreferrer",target:"_blank",href:e.url,className:"result",key:t},n.a.createElement("div",{className:"result-points"},n.a.createElement("div",{className:"result-points-circle"},e.points)),n.a.createElement("div",{className:"result-title"},n.a.createElement("h3",null,e.title),n.a.createElement("span",{className:"result-date"},n.a.createElement(R.a,{format:"dddd, MMMM Do YYYY"},e.created_at))),n.a.createElement("span",{className:"result-url",rel:"noopener noreferrer",target:"_blank",href:e.url},e.url?T()(e.url):""))}):n.a.createElement("div",{className:"nothing-found"},n.a.createElement("span",null,"Nothing Found Here!"))))}}]),t}(r.Component),L=a(32),U=a.n(L).a.create({baseURL:"https://cors-anywhere.herokuapp.com/http://hn.algolia.com/api/v1/",responseType:"json"}),x=function(e){var t=e.page,a=e.nbPages,r=e.prevPage,s=e.nextPage;return n.a.createElement("div",{className:"pagination"},n.a.createElement("button",{className:"prev",onClick:r},"PREVIOUS"),n.a.createElement("p",null,"PAGE: ",t+1," of ",a),n.a.createElement("button",{className:"next",onClick:s},"NEXT"))},H=function(e){return n.a.createElement("div",{className:"footer"},e.children)},V=a(13),X=a.n(V),B=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(l.a)(this,Object(p.a)(t).call(this,e))).state={searchType:"search",selectedDate:null,typing:!1},a.delayedUpdate=b.a.debounce(a.searchAPI,1e3),a.updateSearchVal=a.updateSearchVal.bind(Object(N.a)(a)),a.nextPage=a.nextPage.bind(Object(N.a)(a)),a.prevPage=a.prevPage.bind(Object(N.a)(a)),a.stringify=a.stringify.bind(Object(N.a)(a)),a.sortDate=a.sortDate.bind(Object(N.a)(a)),a.cancelSortDate=a.cancelSortDate.bind(Object(N.a)(a)),a.cancelSearch=a.cancelSearch.bind(Object(N.a)(a)),a}return Object(u.a)(t,e),Object(o.a)(t,[{key:"stringify",value:function(e){var t="?"+Object.keys(e).map(function(t){return t+"="+e[t]}).join("&");return(t=t.replace(/ /g,"%20"))+"&tags=story"}},{key:"searchAPI",value:function(){var e=Object(j.a)(_.a.mark(function e(t,a){var r,n;return _.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.state.typing&&this.setState({typing:!1}),a||(a="search"),r=t?this.stringify(t):this.stringify(this.props.search),e.next=5,U.get(a+r);case 5:n=e.sent,this.props.getAllStories(n.data);case 7:case"end":return e.stop()}},e,this)}));return function(t,a){return e.apply(this,arguments)}}()},{key:"nextPage",value:function(){if(this.props.stories.page<this.props.stories.nbPages){var e=this.props.search;e.page=this.props.stories.page+1,this.searchAPI(e),document.getElementById("content-wrapper").scrollTop=0}}},{key:"prevPage",value:function(){if(this.props.stories.page>0){var e=this.props.search;e.page=this.props.stories.page-1,this.searchAPI(e),document.getElementById("content-wrapper").scrollTop=0}}},{key:"sortDate",value:function(e){var t="created_at_i <"+X()().unix(),a="created_at_i>"+X()().subtract(e,"days").unix(),r=this.props.search;r.numericFilters=a+","+t,this.setState({selectedDate:e}),this.searchAPI(r)}},{key:"cancelSortDate",value:function(){var e=this.props.search;e.numericFilters&&(delete e.numericFilters,this.searchAPI(e),this.setState({selectedDate:null}))}},{key:"cancelSearch",value:function(){document.getElementById("search-input").value="",this.props.clearSearch(),this.setState({selectedDate:null,typing:!1}),this.searchAPI({})}},{key:"updateSearchVal",value:function(e,t){this.setState({typing:!0}),t.persist(),this.props.updateSearch(e,t.target.value),this.delayedUpdate()}},{key:"componentDidMount",value:function(){this.searchAPI("")}},{key:"render",value:function(){var e=this;return n.a.createElement("div",{id:"content-wrapper"},n.a.createElement(k,{onKeyUp:function(t){return e.updateSearchVal("query",t)},sortDate:this.sortDate,selectedDate:this.state.selectedDate,cancelSortDate:this.cancelSortDate,cancelSearch:this.cancelSearch}),this.props.stories.hits?n.a.createElement(I,{typing:this.state.typing,stories:this.props.stories.hits}):"",n.a.createElement(H,null,isNaN(this.props.stories.page)?"":n.a.createElement(x,{page:this.props.stories.page,nbPages:this.props.stories.nbPages,prevPage:this.prevPage,nextPage:this.nextPage})))}}]),t}(r.Component),G=Object(h.b)(function(e){return{stories:e.stories,search:e.search}},function(e){return{getAllStories:function(t){return e(y(t))},updateSearch:function(t,a){return e(E(t,a))},clearSearch:function(){return e(g())}}})(B),M=(O=window.REDUX_INITIAL_DATA,Object(d.b)(S,O,window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__())),F=function(e){function t(){return Object(i.a)(this,t),Object(l.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return n.a.createElement(h.a,{store:M},n.a.createElement(G,null))}}]),t}(r.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(n.a.createElement(F,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[33,1,2]]]);
//# sourceMappingURL=main.8db6ece9.chunk.js.map